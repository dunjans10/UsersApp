<div class="container">
  <mat-progress-spinner mode="indeterminate" diameter="60" *ngIf="loading | async"></mat-progress-spinner>

<h2 *ngIf="error">{{error}}</h2>

<div *ngIf="!error" class="btn-container">
  <button (click)="addUser()" mat-raised-button color="primary" class="btn">
    Add User
  </button>
  <div *ngIf="dataSource">
<table mat-table [dataSource]="dataSource">

  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef class="header-title start"> Name </th>
    <td mat-cell *matCellDef="let user"> {{user.name}} </td>
  </ng-container>

  <ng-container matColumnDef="email">
    <th mat-header-cell *matHeaderCellDef class="header-title start"> Email </th>
    <td mat-cell *matCellDef="let user" class="w-27"> {{user.email}} </td>
  </ng-container>

   <ng-container matColumnDef="gender">
    <th mat-header-cell *matHeaderCellDef class="header-title middle"> Gender </th>
    <td mat-cell *matCellDef="let user" class="middle"> {{user.gender}} </td>
  </ng-container>

  <ng-container matColumnDef="status">
    <th mat-header-cell *matHeaderCellDef class="header-title middle"> Status </th>
    <td mat-cell *matCellDef="let user" class="middle">
      <mat-icon style="color: green;" *ngIf="user.status === 'active'">done</mat-icon>
      <mat-icon style="color: #f44336;" *ngIf="user.status === 'inactive'">clear</mat-icon>
    </td>
  </ng-container>

  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef class="header-title middle"> Actions </th>
    <td mat-cell *matCellDef="let user">
      <button  mat-raised-button class="edit-btn" color="accent" (click)="updateUser(user.id)">Edit</button>
      <button  mat-raised-button color="warn" (click)="deleteUser(user.id)">Delete</button>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>

<mat-paginator [length]="dataSource.length"
               [pageSize]="pageSize"
               [pageSizeOptions]="[10]"
               (page)="pageEvent = $event; onPaginateChange($event)"
               showFirstLastButtons>
</mat-paginator>
</div>

</div>


</div>

